# Structured Data Schema Documentation

This document provides a comprehensive reference for the structured data format generated by the GWD Banner Processing System.

## ğŸ“Š Complete Data Structure Overview

```json
{
  "metadata": { ... },
  "canvas": { ... },
  "layers": [ ... ],
  "groups": { ... },
  "animations": [ ... ],
  "typography": { ... },
  "images": [ ... ],
  "interactions": [ ... ],
  "styles": { ... }
}
```

## ğŸ” Detailed Schema Reference

### 1. Metadata Section

Contains banner information and processing details.

```json
{
  "metadata": {
    "title": "Banner title from HTML",
    "size": "300x600",
    "extractedAt": "2025-08-04T16:18:43.709Z",
    "url": "https://example.com/banner/index.html",
    "hasGWD": true,
    "hasStudio": true,
    "hasEnabler": true,
    "timelineAvailable": true,
    "animationLibraries": ["Google Web Designer", "DoubleClick Studio"]
  }
}
```

#### Metadata Fields

| Field | Type | Description |
|-------|------|-------------|
| `title` | string | Banner page title |
| `size` | string | Banner dimensions (e.g., "300x600") |
| `extractedAt` | string | ISO timestamp of data extraction |
| `url` | string | Original banner URL |
| `hasGWD` | boolean | Google Web Designer detected |
| `hasStudio` | boolean | DoubleClick Studio detected |
| `hasEnabler` | boolean | Google Enabler library detected |
| `timelineAvailable` | boolean | GWD timeline API available |
| `animationLibraries` | array | List of detected animation libraries |

### 2. Canvas Section

Describes the banner's canvas properties.

```json
{
  "canvas": {
    "width": 300,
    "height": 600,
    "backgroundColor": "rgb(255, 255, 255)",
    "id": "page1",
    "classes": "gwd-page-wrapper gwd-page-size gwd-lightbox"
  }
}
```

#### Canvas Fields

| Field | Type | Description |
|-------|------|-------------|
| `width` | number | Canvas width in pixels |
| `height` | number | Canvas height in pixels |
| `backgroundColor` | string | Canvas background color (CSS format) |
| `id` | string | GWD page element ID |
| `classes` | string | CSS classes applied to canvas |

### 3. Layers Section

Array of semantic design elements with position and styling.

```json
{
  "layers": [
    {
      "id": "Heading1",
      "type": "heading",
      "semanticRole": "heading",
      "tagName": "h1",
      "className": "gwd-h1-do6w gwd-h1-1wbr gwd-gen-1bspgwdanimation",
      "position": {
        "x": 20,
        "y": 53,
        "width": 260,
        "height": 32,
        "zIndex": 0
      },
      "styles": {
        "opacity": 1.0,
        "transform": "matrix(1, 0, 0, 1, 0, 0)",
        "backgroundColor": "rgba(0, 0, 0, 0)",
        "color": "rgb(253, 103, 78)",
        "fontSize": "52px",
        "fontFamily": "Oswald",
        "fontWeight": "400",
        "textAlign": "center",
        "backgroundImage": null
      },
      "content": {
        "text": "AWESOME",
        "src": null,
        "alt": null
      },
      "groupName": null,
      "isAnimated": true,
      "animationInfo": {
        "name": "gwd-gen-1bspgwdanimation_gwd-keyframes_start",
        "duration": "0.4s",
        "iterationCount": "1",
        "timingFunction": "linear",
        "delay": "1.1s",
        "fillMode": "forwards"
      }
    }
  ]
}
```

#### Layer Types

| Type | Description | Example Elements |
|------|-------------|------------------|
| `heading` | Main headings (H1-H6) | "AWESOME", "CAMPAIGN" |
| `text` | Body text and paragraphs | Descriptions, taglines |
| `image` | Visual elements | Photos, graphics, backgrounds |
| `interactive` | CTA elements | Buttons, clickable areas |
| `interaction` | Click targets | Tap areas, overlays |

#### Semantic Roles

| Role | Description | Usage |
|------|-------------|-------|
| `heading` | Primary headings | Main banner messages |
| `body-text` | Content text | Descriptions, details |
| `logo` | Brand identifiers | Company logos |
| `background` | Background images | Design backgrounds |
| `content-image` | Content graphics | Product images, illustrations |
| `call-to-action` | Action buttons | "Buy Now", "Learn More" |
| `clickable-area` | Interactive zones | Full banner tap areas |
| `url` | Web addresses | Website URLs |

#### Position Object

```json
{
  "position": {
    "x": 20,        // Left position (pixels)
    "y": 53,        // Top position (pixels)
    "width": 260,   // Element width (pixels)
    "height": 32,   // Element height (pixels)
    "zIndex": 0     // Stacking order
  }
}
```

#### Styles Object

```json
{
  "styles": {
    "opacity": 1.0,                           // Transparency (0-1)
    "transform": "matrix(1, 0, 0, 1, 0, 0)",  // CSS transform
    "backgroundColor": "rgba(0, 0, 0, 0)",    // Background color
    "color": "rgb(253, 103, 78)",             // Text color
    "fontSize": "52px",                       // Font size
    "fontFamily": "Oswald",                   // Font family
    "fontWeight": "400",                      // Font weight
    "textAlign": "center",                    // Text alignment
    "backgroundImage": null                   // Background image
  }
}
```

### 4. Groups Section

Describes GWD element groupings.

```json
{
  "groups": {
    "CTA": {
      "name": "CTA",
      "elements": [
        {
          "tagName": "div",
          "id": "Call-To-Action",
          "className": "gwd-div-uyoz gwd-gen-1lhdgwdanimation",
          "position": { "x": 162, "y": 271, "width": 121, "height": 171 },
          "content": "GET QUOTE NOW"
        }
      ],
      "boundingBox": {
        "x": 162,
        "y": 271,
        "width": 121,
        "height": 171
      }
    }
  }
}
```

#### Group Fields

| Field | Type | Description |
|-------|------|-------------|
| `name` | string | Group identifier |
| `elements` | array | Elements in this group |
| `boundingBox` | object | Group's overall dimensions |

### 5. Animations Section

Array of animation definitions with timing details.

```json
{
  "animations": [
    {
      "elementId": "Heading1",
      "name": "gwd-gen-1bspgwdanimation_gwd-keyframes_start",
      "duration": "0.4s",
      "iterationCount": "1",
      "timingFunction": "linear",
      "delay": "1.1s",
      "fillMode": "forwards"
    }
  ]
}
```

#### Animation Fields

| Field | Type | Description |
|-------|------|-------------|
| `elementId` | string | Target element ID |
| `name` | string | Animation keyframe name |
| `duration` | string | Animation duration (CSS format) |
| `iterationCount` | string | Number of iterations |
| `timingFunction` | string | Easing function |
| `delay` | string | Start delay |
| `fillMode` | string | Animation fill mode |

### 6. Typography Section

Comprehensive text styling information.

```json
{
  "typography": {
    "fonts": ["Oswald", "Raleway"],
    "colors": ["rgb(253, 103, 78)", "rgb(255, 255, 255)", "rgb(13, 54, 82)"],
    "textElements": [
      {
        "id": "Heading1",
        "text": "AWESOME",
        "semanticRole": "heading",
        "typography": {
          "fontFamily": "Oswald",
          "fontSize": "52px",
          "fontWeight": "400",
          "color": "rgb(253, 103, 78)",
          "textAlign": "center",
          "lineHeight": "normal"
        }
      }
    ]
  }
}
```

#### Typography Fields

| Field | Type | Description |
|-------|------|-------------|
| `fonts` | array | Unique fonts used in banner |
| `colors` | array | Unique text colors used |
| `textElements` | array | Detailed text element information |

### 7. Images Section

Information about all image assets.

```json
{
  "images": [
    {
      "id": "Logo",
      "src": "https://example.com/logo.png",
      "alt": null,
      "semanticRole": "logo",
      "dimensions": {
        "width": 66,
        "height": 28
      }
    }
  ]
}
```

#### Image Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Element identifier |
| `src` | string | Original image URL |
| `alt` | string | Alt text (if any) |
| `semanticRole` | string | Image purpose/role |
| `dimensions` | object | Width and height |

### 8. Interactions Section

Interactive elements and click targets.

```json
{
  "interactions": [
    {
      "id": "TapArea",
      "type": "clickable-area",
      "position": { "x": 0, "y": 0, "width": 300, "height": 600 },
      "content": ""
    }
  ]
}
```

#### Interaction Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Element identifier |
| `type` | string | Interaction type |
| `position` | object | Click area bounds |
| `content` | string | Associated text content |

### 9. Styles Section

CSS animation keyframes and styling rules.

```json
{
  "styles": {
    "keyframes": {
      "gwd-gen-1bspgwdanimation_gwd-keyframes_start": {
        "name": "gwd-gen-1bspgwdanimation_gwd-keyframes_start",
        "rules": [
          {
            "keyText": "0%",
            "style": "transform: scale3d(1, 0.41, 1); opacity: 0; left: 20px; top: 30px;"
          },
          {
            "keyText": "100%",
            "style": "transform: scale3d(1, 1, 1); opacity: 1; left: 20px; top: 62px;"
          }
        ]
      }
    }
  }
}
```

## ğŸ¯ Usage Examples

### Finding All Headings
```javascript
const headings = data.layers.filter(layer => layer.type === 'heading');
```

### Getting Animation Timeline
```javascript
const timeline = data.animations.sort((a, b) => 
  parseFloat(a.delay) - parseFloat(b.delay)
);
```

### Extracting Color Palette
```javascript
const colors = [...new Set([
  ...data.typography.colors,
  ...data.layers.map(l => l.styles.backgroundColor).filter(Boolean)
])];
```

### Finding Interactive Elements
```javascript
const interactive = data.layers.filter(layer => 
  layer.semanticRole === 'call-to-action' || layer.type === 'interaction'
);
```

## ğŸ”§ Data Validation

### Required Fields
- `metadata.size` - Banner dimensions
- `canvas.width`, `canvas.height` - Canvas size
- `layers[].id` - Unique layer identifier
- `layers[].type` - Layer type classification

### Optional Fields
- `layers[].animationInfo` - Only for animated elements
- `layers[].groupName` - Only for grouped elements
- `groups` - Only if GWD groups exist

## ğŸ“ Best Practices

1. **Use Semantic Roles**: Leverage `semanticRole` for element classification
2. **Check Animation State**: Verify `isAnimated` before accessing `animationInfo`
3. **Validate Positions**: Ensure position values are within canvas bounds
4. **Font Availability**: Check `typography.fonts` for required web fonts
5. **Asset References**: Use local asset paths from `images[].src`

## ğŸš€ Performance Considerations

- Large banners may have 50+ layers
- Animation keyframes can be extensive
- Image data includes full asset URLs
- Typography data captures all text variations

## ğŸ”„ Version History

- **v1.0**: Initial schema with basic layer support
- **v2.0**: Added semantic roles and enhanced animation data
- **v3.0**: Comprehensive typography and interaction analysis
- **v4.0**: Current version with full GWD integration
